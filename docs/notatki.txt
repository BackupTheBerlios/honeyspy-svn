
my-ca.pem to certifykat CA, je¶li chcemy sprawdzic, czy druga strona ma certyfikat
podpisany przez tego CA

SSL_use_cert okresla, czy klient pokazuje ze tez ma certyfikat
SSL_verify_mode okresla, czy sprawdzac podpisy na certyfikacie drugiej strony
SSL_ca_file (my-ca.pem). tym certyfikatem musi byc podpisany cert. drugiej strony
SSL_key_file
SSL_cert_file



na serwerze centeralnym musi byc certifykat oraz para kluczy
ten certyfikat musza miec sensory

kazdy sensor musi miec swoj certyfikat podpisany certyfikatem centralnego
z pola Common Name certyfikatu laczaceo sie sensora centralny odczytuje
symboliczna nazwe tego sensora.
Ta nazwa nie mogla byc sfalszowana, bo jest w certyfikacie podpisanym
certyfikatem centralnego.


jest potrzebny klucz i certyfika urzêdu certyfikacyjnego
	utworzyc klucz
	usunac fraze koduj±c±
	utworzyc certyfikat podpisany nim samym


na serwerze:
	Utworzyc klucz prywatny:

	openssl genrsa -des3 -out server-key.enc 1024
	passphrase: test

	Usuniecie frazy kodujacej:
	openssl rsa -in server-key.enc -out server-key.pem

	
	utworzyc pro¶bê o podpisanie certyfikatu
		openssl req -new -key server-key.pem -out server.csr

	wystawic certyfikat serwerowi za pomoca certyfikatu urzedu certifykacyjnego
		openssl ca -policy policy_anything -keyfile ca-key.pem \
			-cert ca-cert.pem -in server.csr -out server-cert.pem

/*
	Utworzyc certyfikat dla tego klucza podpisany nim samym:
	openssl req -new -x509 -days 365 -key server-key.pem -out server-cert.pem
*/

	Informacje o certyfikacie pokazuje:
		openssl x509 -noout -text -in server-cert.pem

	Informacje o kluczu pokazuje:
		openssl rsa -noout -text -in server-key.pem

na kliencie:
	utworzyc klucz prywatny
		openssl genrsa -des3 -out sensor1-key.enc 1024
		openssl rsa -in sensor1-key.enc -out sensor1-key.pem
	utworzyc pro¶bê o podpisanie certyfikatu
		openssl req -new -key sensor1-key.pem -out sensor1.csr
	centrum certyfikacyjne wystawia certyfikat sensorowi swoim (self-signed) certyfikatem
		openssl ca -policy policy_anything -keyfile ca-key.pem \
			-cert ca-cert.pem -in sensor1.csr -out sensor1-cert.pem
		[trzeba jeszcze utworzyc pusty katalog np demoCA, pusty plik demoCA/index.txt i 01 > demoCA/serial]


http://www.modssl.org/docs/2.8/ssl_faq.html#ToC24
http://www.tldp.org/HOWTO/SSL-Certificates-HOWTO/x64.html

